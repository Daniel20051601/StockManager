@page "/Compras/Create"
@inject IToastService toastService
@inject NavigationManager navigationManager
@rendermode InteractiveServer

<PageTitle>Crear Orden de Compra</PageTitle>
<div class="header-section mt-5">
    <div class="row d-flex justify-content-between">
        <div class="col-auto">
            <h3 class="fw-semibold">Compras</h3>
        </div>
        <div class="col-auto mb-3">
            <div class="d-flex justify-content-around">
                <div class="dropdown">
                    <button type="button" class="btn btn-outline bi bi-bell text-secondary shadow-sm ms-4" data-bs-toggle="dropdown" aria-expanded="false">
                    </button>
                    <div class=" shadow-sm dropdown-menu dropdown-menu-end p-4 mt-2" style="width: 350px; height: 400px; overflow-y: auto;">
                        <div class="mb-3">

                            <div class="bg-danger-subtle border border-danger-subtle rounded-3 p-2 mb-2">
                                <label class="bi bi-bell text-danger-emphasis"> <strong class="ms-2"> Productos apunto de vencer</strong></label>
                                <p class="fw-light">Algunos productos est&aacute;n apunto de vencer</p>
                            </div>

                            <div class="bg-primary-subtle border border-primary-subtle rounded-3 p-2 mb-2">
                                <label class="bi bi-bell text-primary-emphasis"> <strong class="ms-2"> Hemos actualizado nuestras pol&iacute;ticas</strong></label>
                                <p class="fw-light">Mira cuales son las novedades</p>
                            </div>

                            <div class="bg-success-subtle border border-success-subtle rounded-3 p-2 mb-2">
                                <label class="bi bi-bell text-success-emphasis"> <strong class="ms-2"> Reporte enviado</strong></label>
                                <p class="fw-light">Su reporte ha sido enviado exitosamente</p>
                            </div>

                            <div class="bg-danger-subtle border border-danger-subtle rounded-3 p-2 mb-2">
                                <label class="bi bi-bell text-danger-emphasis"> <strong class="ms-2"> Productos apunto de vencer</strong></label>
                                <p class="fw-light">Algunos productos est&aacute;n apunto de vencer</p>
                            </div>

                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
    <h3 class=" text-center mb-5">Crear Orden de Compra</h3>
</div>
<div class="container">
    <div class="mb-3 mx-5">
        <label class="form-label fs-4">T&iacute;tulo</label>
        <input type="text" class="form-control" placeholder="Ingrese el t&iacute;tulo de la orden de compra" />
    </div>
    <div class="mb-3 mx-5">
        <label class="form-label fs-4">Proveedor</label>
        <InputSelect class="form-select" @bind-Value="proveedor">
            <option value="">Seleccione un proveedor</option>
            <option value="Proveedor1">ISM</option>
            <option value="Proveedor2">CocaCola</option>
            <option value="Proveedor3">Pepsi</option>
            <option value="Proveedor4">Nestlé</option>
            <option value="Proveedor5">Unilever</option>
        </InputSelect>
    </div>
    <div class="mb-3 mx-5">
        <label class="form-label fs-4">Fecha de entrega estimada</label>
        <input type="date" class="form-control mb-2" />
    </div>
    <div class=" mx-5">
        <label class="form-label fs-4">Agregar productos</label>
        <table class="table table-hover">
            <thead class="table table-striped text-black">
                <tr>
                    <th>SKU</th>
                    <th>Categoria</th>
                    <th>Nombre</th>
                    <th>Marca</th>
                    <th>Cantidad</th>
                    <th>Precio Unitario</th>
                    <th>Eliminar</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>12345</td>
                    <td>Bebidas</td>
                    <td>Coca Cola</td>
                    <td>Coca Cola</td>
                    <td>45</td>
                    <td>$1.00</td>
                    <td><button class="btn btn-danger bi bi-trash shadow-sm"></button></td>
                </tr>
                <tr>
                    <td>67890</td>
                    <td>Snacks</td>
                    <td>Chips</td>
                    <td>Lays</td>
                    <td>30</td>
                    <td>$0.50</td>
                    <td><button class="btn btn-danger bi bi-trash shadow-sm"></button></td>
                </tr>
                <tr>
                    <td>11223</td>
                    <td>Gaseosas</td>
                    <td>Pepsi</td>
                    <td>PepsiCo</td>
                    <td>20</td>
                    <td>$0.80</td>
                    <td><button class="btn btn-danger bi bi-trash shadow-sm"></button></td>
                </tr>
            </tbody>
        </table>

    </div>
    <div class="d-flex justify-content-end mb-5 mx-5 ">
        <button type="button" class="btn btn-primary bi bi-plus-circle shadow-sm" @onclick="() => MostrarModal = true">
            Agregar
        </button>
    </div>

    <div class="d-flex justify-content-between mx-5 mt-3 mb-5">
        <div class="col-3 mx-5 text-center">
            <label class="form-label fs-4">Subtotal General</label>
            <label class="form-label"><strong>RD$</strong><span class="text-success">13,000</span></label>
        </div>
        <div class="col-3 mx-5 text-center">
            <label class="form-label fs-4">Total de la Orden</label>
            <label class="form-label "><strong>RD$</strong><span class="text-success">16,000</span></label>
        </div>
    </div>

</div>



<div class="container mb-5 d-flex justify-content-center">

    <a href="/Compras/Index" class="btn btn-danger bi bi-arrow-left shadow-sm ">  Cancelar</a>
    <button class="btn btn-success bi bi-check2-circle shadow-sm ms-2" @onclick="Guardar">  Guardar</button>
    <button class="btn btn-secondary bi bi-printer shadow-sm ms-2" @onclick="Imprimir">  Imprimir</button>
</div>


@if (MostrarModal)
{
    <div class="modal fade show d-block bg-opacity-50" tabindex="-1" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content shadow">
                <div class="modal-header">
                    <h3 class="modal-title text-center">Agregar productos</h3>
                   
                </div>

                <div class="modal-body text-center mb-3">
                    <p>Agregar nuevos productos</p>
                </div>

                <div class="modal-footer d-flex justify-content-center">
                    <div class="btn-group" role="group">
                        <button type="button" class="btn btn-outline-secondary" @onclick="CerrarModal">
                            <span class="bi bi-box-arrow-left"></span> Volver
                        </button>
                        <button type="button" class="btn btn-outline-primary">
                            <span class="bi bi-plus"> Agregar</span>
                        </button>
                    </div>
                    
                </div>
            </div>

        </div>
    </div>

}

@code {
    private string proveedor { get; set; } = string.Empty;

    private Boolean MostrarModal = false;

    private void Guardar()
    {
        toastService.ShowSuccess("Orden de compra guardada exitosamente");
        navigationManager.NavigateTo("/Compras/Index");
    }

    private void Imprimir()
    {
        toastService.ShowInfo("Impresión en curso...");
    }

    private void CerrarModal()
    {
        MostrarModal = false;
    }

}
